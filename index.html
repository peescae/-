<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>逆レモン</title>
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="./image/ファビコン.ico">
    </head>
    <body>
        <div id="game-container">
            <h1>逆レモン VS ミルおじ</h1>

            <!-- 音量調節スライダーの追加 -->
            <div id="volume-controls" style="text-align: center; margin-bottom: 10px;">
                <div style="display: inline-block; margin: 0 10px;">
                    <label for="music-volume" style="color: #61dafb;">音楽:</label>
                    <input type="range" id="music-volume" min="0" max="10" value="7" step="1" style="width: 120px;">
                </div>
                <div style="display: inline-block; margin: 0 10px;">
                    <label for="sfx-volume" style="color: #61dafb;">効果音:</label>
                    <input type="range" id="sfx-volume" min="0" max="10" value="7" step="1" style="width: 120px;">
                </div>
            </div>

            <div id="seed-info-area" style="text-align: center; font-size: 0.8em; color: #bbbbbb; margin-top: 1px;">
                <p>使用中のシード値: <span id="seed-display"></span></p>
            </div>

            <div id="game-messages">
                <p>
                    <strong>ダン・セーウケ王国</strong>の<strong>ショーター王子</strong>が誘拐されてしまった！<br/>
                    王子は屈強なモン娘がひしめく<strong>逆レモン連邦</strong>のどこかに囚われているらしい！<br/>
                    王様は、王子を救出した者に<strong>100億円</strong>の報奨金を授けるとお触れを出した！<br/>
                    王子がモン娘に食べられちゃう前に、なんとしてでも救い出すのだ！<br/>
                    がんばれ！　まけるな！　<strong>こくまろミルク製造おじさん</strong>！　お前がやらねば誰がやる！
                </p>
            </div>

            <div id="game-info">
                <p><span id="days-display">0</span>日目</p>
                <p>ミルク: <span id="milk-display">3</span></p>
                <p>食料: <span id="food-display">100</span></p>
                <p>現在の地形: <span id="current-area-display"></span> <span id="current-area-coins-display"></span></p>
            </div>

            <div id="favour"></div>

            <div id="coin-animation-area"></div>

            <div id="initial-setup-area" style="text-align: center; margin-bottom: 15px;">
                <div class="seed-input-area">
                    <label for="seed-input">シード値 (空欄でランダム):</label>
                    <input type="text" id="seed-input" placeholder="例: myadventure123">
                </div>
                <button id="start-game-button" class="action-button">ゲーム開始</button>
            </div>

            <div id="action-area">
            </div>

            <div id="party-info">
                <!-- 仲間のモン娘の維持費合計を表示するように変更 -->
                <h2>仲間のモン娘 (食費/日: <span id="party-size-display">0</span>)</h2>
                <!-- この中にモン娘リストを入れ、スクロールを制御 -->
                <div id="party-list-container">
                    <ul id="party-list">
                        <!-- モン娘カードがここに追加されます -->
                        <li class="empty-slot"></li>
                        <li class="empty-slot"></li>
                        <li class="empty-slot"></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ホムンクルス画像とヘルプボタン -->
        <div id="homunculus-container">
            <img id="homunculus-image" src="" alt="ホムンクルス" title="クリックしてヘルプを表示">
        </div>

        <!-- ヘルプウィンドウのオーバーレイ -->
        <div id="help-overlay" class="modal-overlay">
            <div id="help-modal" class="modal-content">
                <h3 id="help-modal-title">ゲームの遊び方</h3>
                <div id="help-modal-content" class="modal-log-content">
                    <!-- ここにゲームの遊び方やヘルプテキストが入ります -->
                    <p>こんにちは！　<strong>こくまろミルク製造おじさん</strong>！</p>
                    <p>僕はおじさんの古くからの相棒、<strong>ホムえもん</strong>だよ！</p>

                    <h4>冒険の目的</h4>
                    <p>誘拐された<strong>ダン・セーウケ王国</strong>の<strong>ショーター王子</strong>を救い出すため、屈強なモン娘がひしめく<strong>逆レモン連邦</strong>を冒険しよう！</p>

                    <h4>冒険の流れ</h4>
                    <ol>
                        <li><strong>ゲーム開始:</strong> 仲間にするモン娘を選ぼう！　最初は最大3人まで仲間にできるよ。</li>
                        <li><strong>探索エリア選択:</strong> 毎日、探索する地形を選ぶよ。</li>
                        <li><strong>探索派遣:</strong> 探索に派遣するモン娘を選ぶよ。地形の属性と一致するモン娘を派遣すると、沢山の食料を獲得できるよ！</li>
                        <li><strong>襲撃:</strong> キャンプに残ったモン娘達で、敵の襲撃を迎え撃とう！　勝利すると敵モン娘を勧誘できるよ！　敗走すると食料が全て無くなるから気を付けて！</li>
                        <li><strong>野営:</strong> 探索で得た食料と、モン娘の食費、襲撃時の戦闘手当を精算するよ。食料が尽きると冒険はおしまいだけど、おじさんのミルクで補填できるよ。</li>
                        <li><strong>次の日へ:</strong> 日数が進むほど地形の属性が増えて、敵も強くなっていくよ！</li>
                    </ol>

                    <h4>戦闘（コイントス）について</h4>
                    <ul>
                        <li>戦闘では、モン娘達が持つ硬貨を一斉にコイントスするよ。</li>
                        <li>地形の硬貨属性とモン娘の硬貨属性が一致すると、その硬貨は必ず「表」になるよ！</li>
                        <li>「表」の硬貨の枚数が、そのままモン娘の戦力値になるよ。</li>
                        <li>特定の硬貨には特殊効果があるよ！（例: 「魔」の硬貨の総数が相手より多いと、味方全体の「魔」硬貨が必ず表になる）</li>
                        <li>味方の総戦力値 ≧ 敵の総戦力値 なら、おじさんの勝ち！</li>
                        <li>コイントスは最大3回行えるけど、コイントスの度に戦闘手当として食料が差し引かれるよ。</li>
                        <li>3回のコイントスで敵に勝てなかった場合、おじさんの負けになっちゃうよ！</li>
                        <li>敗北すると、全ての食料をその場に残して撤退することになるんだ。気を付けよう！</li>
                    </ul>

                    <h4>ボス戦について</h4>
                    <ul>
                        <li><strong>10日目</strong>に到達する関所と、<strong>20日目</strong>に到達する中枢ではボス戦が待ってるよ！</li>
                        <li>とても強いモン娘達との3連戦が始まるよ！</li>
                        <li>一度戦ったモン娘は、そのボス戦中は再び戦いに参加出来ないから、戦力の配分には気を付けて。</li>
                        <li>一度でも負ければ、おじさんの冒険はそこで終了だ！</li>
                    </ul>

                    <h4>資源管理</h4>
                    <ul>
                        <li><strong>食料:</strong> 探索で獲得し、モン娘の維持費や戦闘手当で消費するよ。食料が尽きると冒険はそこでおしまい！</li>
                        <li><strong>ミルク:</strong> 毎日1杯生産されて、食料が尽きた際の補填や、モン娘の勧誘で消費するよ。</li>
                    </ul>

                    <h4>神の寵愛</h4>
                    <ul>
                        <li>たまに神様から寵愛を授かることがあるよ。</li>
                        <li>授かった硬貨は、その硬貨を持つ仲間の戦力値を加算するよ。</li>
                    </ul>

                    <h4>クリア条件</h4>
                    <ul>
                        <li><strong>クリア:</strong> 20日目のラスボス戦に勝利するとクリアだよ！</li>
                        <li><strong>ハッピーエンド:</strong> 食料が尽き、ミルクでの補填もできない場合、おじさんの冒険はそこでおしまい！</li>
                    </ul>

                    <h4>アドバイス</h4>
                    <ul>
                        <li>戦いは数だよ、おじさん！　仲間が沢山いれば、それだけ選択の幅が広がるよ！</li>
                        <li>無理は禁物！　食料集めにモン娘を割き過ぎて守りが疎かになったら危険！　負けたら食料はゼロだからね！</li>
                        <li>待機メンバーは戦いの得意なモン娘を選ぼう！　例えば毒の硬貨は敵全員の戦力値を減算するよ！</li>
                    </ul>

                    <h4>利用素材</h4>
                    <ul>
                        <li><strong>魔王魂</strong> https://maou.audio/</li>
                    </ul>
                </div>
                <button id="help-modal-close-button" class="modal-close-button">閉じる</button>
            </div>
        </div>


        <script src="data.js" type="module"></script>
        <script src="monster.js" type="module"></script>
        <script src="game.js" type="module"></script>
        <script src="uiManager.js" type="module"></script>
        <script src="coinAnimation.js" type="module"></script>
        <script src="food.js" type="module"></script>
        <script src="battle.js" type="module"></script>
        <script src="helpUI.js" type="module"></script>
        <script src="musicManager.js" type="module"></script>
    </body>
</html>
